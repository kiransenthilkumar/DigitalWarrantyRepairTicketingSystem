{% extends "base.html" %}

{% block title %}Add Feedback - Warranty System{% endblock %}

{% block content %}
<div class="p-6">
    <div class="max-w-2xl mx-auto bg-white shadow rounded overflow-hidden">
        <div class="bg-primary text-white p-4">
            <h4 class="text-lg font-semibold"><i class="fas fa-star mr-2"></i> Share Your Feedback</h4>
        </div>
        <div class="p-6">
            <div class="bg-cyan-50 border border-cyan-200 rounded p-4 mb-6">
                <p class="text-sm"><strong>Ticket:</strong> {{ ticket.ticket_number }}</p>
                <p class="text-sm"><strong>Product:</strong> {{ ticket.product.product_name }}</p>
            </div>
            
            <form method="POST" novalidate>
                {{ form.hidden_tag() }}
                
                <div class="mb-6">
                    <label class="block text-sm font-semibold mb-2">{{ form.rating.label }}</label>
                    {% if form.rating.errors %}
                        {{ form.rating(class="w-full px-3 py-2 border border-red-400 rounded-md focus:outline-none focus:ring focus:ring-red-300") }}
                        <div class="text-red-600 text-sm mt-1">
                            {% for error in form.rating.errors %}{{ error }}{% endfor %}
                        </div>
                    {% else %}
                        {{ form.rating(class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring focus:ring-primary") }}
                    {% endif %}
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-semibold mb-2">{{ form.comment.label }}</label>
                    {% if form.comment.errors %}
                        {{ form.comment(class="w-full px-3 py-2 border border-red-400 rounded-md focus:outline-none focus:ring focus:ring-red-300", rows="4") }}
                        <div class="text-red-600 text-sm mt-1">
                            {% for error in form.comment.errors %}{{ error }}{% endfor %}
                        </div>
                    {% else %}
                        {{ form.comment(class="w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring focus:ring-primary", rows="4", placeholder="Optional: Share your experience...") }}
                    {% endif %}
                </div>
                
                <div class="flex gap-2">
                    <button type="submit" class="flex-1 px-4 py-2 bg-primary text-white rounded-md hover:opacity-90">
                        <i class="fas fa-paper-plane mr-1"></i> Submit Feedback
                    </button>
                    <a href="{{ url_for('customer.ticket_detail', ticket_id=ticket.id) }}" class="flex-1 px-4 py-2 bg-slate-600 text-white rounded-md hover:opacity-90 text-center">
                        <i class="fas fa-times mr-1"></i> Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
