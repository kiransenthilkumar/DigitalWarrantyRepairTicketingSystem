{% extends "base.html" %}

{% block title %}Raise Repair Ticket - Warranty System{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <a href="{{ url_for('customer.tickets') }}" class="inline-flex items-center px-3 py-2 mb-4 border rounded-md">
        <i class="fas fa-arrow-left mr-2"></i> Back
    </a>

    <div class="bg-white shadow rounded p-6">
        <h2 class="text-2xl font-semibold mb-6"><i class="fas fa-plus-circle mr-2"></i>Create Repair Ticket</h2>
        
        <form method="POST" enctype="multipart/form-data" novalidate>
            {{ form.hidden_tag() }}
            
            <div class="mb-4">
                <label class="block text-sm font-medium mb-2">{{ form.product_id.label }}</label>
                {{ form.product_id(class='mt-1 block w-full rounded-md border border-slate-300 p-2 focus:border-accent focus:ring-1 focus:ring-accent') }}
                {% if form.product_id.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.product_id.errors[0] }}</p>
                {% endif %}
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium mb-2">{{ form.issue_description.label }}</label>
                <small class="text-slate-500">Describe the issue in detail (minimum 10 characters)</small>
                {{ form.issue_description(class='mt-1 block w-full rounded-md border border-slate-300 p-2 focus:border-accent focus:ring-1 focus:ring-accent', rows='5', placeholder='Describe the issue you\'re facing...') }}
                {% if form.issue_description.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.issue_description.errors[0] }}</p>
                {% endif %}
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-medium mb-2">{{ form.priority.label }}</label>
                    {{ form.priority(class='block w-full rounded-md border border-slate-300 p-2 focus:border-accent focus:ring-1 focus:ring-accent') }}
                    {% if form.priority.errors %}
                        <p class="text-red-600 text-sm mt-1">{{ form.priority.errors[0] }}</p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">{{ form.repair_type.label }}</label>
                    {{ form.repair_type(class='block w-full rounded-md border border-slate-300 p-2 focus:border-accent focus:ring-1 focus:ring-accent') }}
                    <p class="text-xs text-slate-500 mt-1">Select if warranty covers repair or if paying for repair</p>
                    {% if form.repair_type.errors %}
                        <p class="text-red-600 text-sm mt-1">{{ form.repair_type.errors[0] }}</p>
                    {% endif %}
                </div>
            </div>
            
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">{{ form.product_images.label }}</label>
                <small class="text-slate-500">Upload images of the defective product (optional)</small>
                {{ form.product_images(class='block w-full mt-1') }}
                {% if form.product_images.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.product_images.errors[0] }}</p>
                {% endif %}
            </div>
            
            <div class="flex gap-2">
                <button type="submit" class="px-6 py-2 bg-accent text-white rounded-md hover:opacity-90">
                    <i class="fas fa-paper-plane mr-2"></i>Create Ticket
                </button>
                <a href="{{ url_for('customer.tickets') }}" class="px-6 py-2 border rounded-md hover:bg-slate-100">
                    Cancel
                </a>
            </div>
        </form>
{% endblock %}
